---
title: "C++ - Memory Safety with Sanitizers and AddressSanitizer (ASan)"
date: 2025-08-25 21:02:48 +0900
categories: c++
tags: [c++, 최신기술, 추천, C++, Memory, Safety, with, Sanitizers, and, AddressSanitizer, (ASan)]
---

## 오늘의 C++ 최신 기술 트렌드: **Memory Safety with Sanitizers and AddressSanitizer (ASan)**

**1. 간단한 설명:**

C++은 메모리 관리에 있어서 강력한 제어력을 제공하지만, 이로 인해 메모리 누수, dangling pointer, out-of-bounds 접근 등 다양한 메모리 오류가 발생하기 쉽습니다. 이러한 오류는 찾기 어렵고, 프로그램의 안정성과 보안을 크게 위협할 수 있습니다.

Sanitizer는 이러한 메모리 관련 버그를 런타임에 탐지하는 강력한 도구입니다. AddressSanitizer (ASan)은 특히 메모리 접근 오류를 탐지하는 데 특화되어 있으며, 사용하기 쉽고 오버헤드가 비교적 적어 널리 사용되고 있습니다.  ASan은 메모리 할당/해제 및 접근 시점에 가드 페이지를 설정하고, 섀도우 메모리 기법을 활용하여 메모리 오류를 즉시 감지합니다.  ASan을 사용하면 개발 과정에서 메모리 관련 버그를 쉽게 발견하고 수정하여, 제품의 안정성과 보안성을 크게 향상시킬 수 있습니다. 최근에는 ASan 뿐만 아니라 MemorySanitizer (MSan), UndefinedBehaviorSanitizer (UBSan) 등 다양한 Sanitizer들이 활용되어 더욱 폭넓은 범위의 런타임 오류를 검출하고 있습니다.

**2. 참고할 만한 공식 사이트나 블로그 링크:**

*   **AddressSanitizer:**
    *   [LLVM AddressSanitizer](https://clang.llvm.org/docs/AddressSanitizer.html)
    *   [GCC AddressSanitizer](https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html)
*   **MemorySanitizer:**
    *   [LLVM MemorySanitizer](https://clang.llvm.org/docs/MemorySanitizer.html)
*   **UndefinedBehaviorSanitizer:**
    *   [LLVM UndefinedBehaviorSanitizer](https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html)
*   **Google Sanitizers:** [https://github.com/google/sanitizers](https://github.com/google/sanitizers)
*   **CppCon 2017: Dmitry Vyukov "Compiler-Based Memory Error Detection"**: [https://www.youtube.com/watch?v=yhqzL2C5-OQ](https://www.youtube.com/watch?v=yhqzL2C5-OQ)

**3. 간단한 코드 예시 (C++):**

```cpp
#include <iostream>

int main() {
    int arr[5];
    // Out-of-bounds 접근
    arr[5] = 10;
    std::cout << arr[0] << std::endl;
    return 0;
}
```

**4. 코드 실행 결과 예시:**

이 코드를 ASan 활성화 상태로 컴파일하고 실행하면 다음과 유사한 오류 메시지를 볼 수 있습니다:

```
==3245==ERROR: AddressSanitizer: stack-buffer-overflow on address 0x7ffc54910114 at pc 0x0000004006a3 bp 0x7ffc54910100 sp 0x7ffc5490f8b8
WRITE of size 4 at 0x7ffc54910114 thread T0
    #0 0x4006a3 in main (/path/to/program+0x4006a3)
    #1 0x7f9c2e6e3b96 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b96)
    #2 0x400569 in _start (/path/to/program+0x400569)

Address 0x7ffc54910114 is located in stack of thread T0 at offset 20 in frame
    #0 0x400617 in main (/path/to/program+0x400617)

This frame has 1 object(s):
    [32, 52) 'arr' (line 4) <int [5]>
HINT: this may be a false positive if your code has undefined behavior.
      Try to compile with -fno-sanitize=undefined
SUMMARY: AddressSanitizer: stack-buffer-overflow (/path/to/program+0x4006a3) in main
Shadow bytes around the buggy address:
  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
==3245==ABORTING
```

이 오류 메시지는 스택 버퍼 오버플로우가 발생했으며, `arr` 배열의 범위를 벗어난 메모리 위치에 쓰기를 시도했음을 명확하게 보여줍니다.  이를 통해 개발자는 문제의 위치를 정확하게 파악하고 수정할 수 있습니다.

