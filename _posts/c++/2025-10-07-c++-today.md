---
title: "C++ - Reflection with Clang LibTooling"
date: 2025-10-07 21:03:22 +0900
categories: c++
tags: [c++, 최신기술, 추천, C++, Reflection, with, Clang, LibTooling]
---

## 오늘의 C++ 최신 기술 트렌드: **Reflection with Clang LibTooling**

**1. 간단한 설명:**

C++ 표준에 포함된 Reflection TS는 아직 완전히 구현되지 않았지만, Clang LibTooling을 활용하여 제한적인 형태의 Reflection을 구현하고 메타데이터를 추출하는 것이 가능합니다. 이를 통해 코드 생성, 직렬화, 데이터베이스 매핑 등 다양한 작업을 자동화하고 개발 생산성을 향상시킬 수 있습니다. Clang LibTooling은 C++ 코드를 파싱하고 분석하는 데 사용할 수 있는 라이브러리 집합으로, AST (Abstract Syntax Tree)를 조작하여 코드 정보를 얻고 수정할 수 있습니다. Clang LibTooling 기반 Reflection은 컴파일 시간에 정보를 추출하여 런타임에 활용하는 형태로, 완전한 Reflection TS에 비해 제약이 있지만 실용적인 솔루션을 제공합니다. 특히, attribute를 활용하여 Reflection 정보를 명시적으로 표현하는 방법이 많이 사용됩니다.

**2. 참고할 만한 공식 사이트나 블로그 링크:**

*   **Clang LibTooling 공식 문서:** [https://clang.llvm.org/docs/LibTooling.html](https://clang.llvm.org/docs/LibTooling.html)
*   **Clang AST Matcher Reference:** [https://clang.llvm.org/docs/LibASTMatchersReference.html](https://clang.llvm.org/docs/LibASTMatchersReference.html)
*   **예제 프로젝트:** (검색 엔진에서 "Clang LibTooling Reflection Example"로 검색하면 다양한 예제 프로젝트를 찾을 수 있습니다.)

**3. 간단한 코드 예시 (C++):**

```cpp
#include <iostream>
#include <string>

// 사용자 정의 attribute
[[attribute::reflectable]]
struct MyStruct {
  [[attribute::field_name("my_int")]]
  int myInt;
  [[attribute::field_name("my_string")]]
  std::string myString;
};

// Clang LibTooling을 사용하여 attribute를 추출하고 출력하는 코드 (Pseudo-code)
// (실제 LibTooling 코드는 더 복잡하며 별도의 컴파일 단계를 거쳐야 합니다.)
void process_ast(ASTContext &Context, MyStructDeclaration *Decl) {
  // MyStruct의 필드 정보를 얻고 출력
  for (auto Field : Decl->fields()) {
    std::string fieldName;
    // attribute를 통해 fieldName을 얻거나, default 이름을 사용
    if (hasAttribute(Field, "attribute::field_name", fieldName)) {
        std::cout << "Field Name: " << fieldName << std::endl;
    } else {
        std::cout << "Field Name (Default): " << Field->getNameAsString() << std::endl;
    }

    // 필드 타입 정보 등을 추가적으로 추출 가능
    std::cout << "Field Type: " << Field->getType().getAsString() << std::endl;
  }
}

int main() {
  MyStruct obj = {123, "Hello, Reflection!"};
  //process_ast(..., &obj);  // 컴파일 타임에 AST 정보를 활용하는 과정 (실제 코드는 Clang LibTooling 기반)
  std::cout << "리플렉션 결과는 process_ast 함수를 통해 출력됩니다." << std::endl;
  return 0;
}
```

**4. 코드 실행 결과 예시:**

```
리플렉션 결과는 process_ast 함수를 통해 출력됩니다.
```

실제 Reflection 결과는 `process_ast` 함수가 Clang LibTooling 기반으로 AST를 분석하고 메타데이터를 추출하여 출력해야 합니다.  위 코드는 단순화된 예시이며, 실제 구현은 Clang ASTMatcher를 이용하여 원하는 AST 노드를 찾고, attribute 정보를 추출하는 복잡한 과정을 포함합니다.

