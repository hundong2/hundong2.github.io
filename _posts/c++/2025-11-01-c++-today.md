---
title: "C++ - Compile-Time Immutability with `consteval` and `constinit`"
date: 2025-11-01 21:03:08 +0900
categories: c++
tags: [c++, 최신기술, 추천, C++, Compile, Time, Immutability, with, `consteval`, and, `constinit`]
---

## 오늘의 C++ 최신 기술 트렌드: **Compile-Time Immutability with `consteval` and `constinit`**

**1. 간단한 설명:**

C++20에 도입된 `consteval`과 `constinit`은 컴파일 시점 상수 연산과 초기화를 더욱 강력하고 명확하게 제어할 수 있도록 해줍니다. `constexpr`과는 달리, `consteval`은 반드시 컴파일 시간에 평가되어야 하는 함수를 정의하는 데 사용됩니다. 만약 `consteval` 함수가 런타임에 호출되면 컴파일 에러가 발생합니다. `constinit`은 컴파일 시간에 초기화되는 전역 또는 정적 변수를 선언하는 데 사용됩니다. `constinit`으로 선언된 변수는 반드시 상수 표현식으로 초기화되어야 하며, 런타임 초기화가 발생하지 않도록 보장합니다. 이러한 기능들은 컴파일 시간 연산을 강제하고, 런타임 성능을 향상시키며, 코드의 안정성을 높이는 데 기여합니다. 특히 임베디드 시스템이나 고성능 컴퓨팅 환경에서 중요한 최적화 기술로 활용될 수 있습니다. Compile-Time Immutability를 통해 immutable한 데이터를 런타임에 생성할 필요 없이, 빌드 시점에 생성하여 런타임 성능 향상 및 메모리 사용량 감소 효과를 얻을 수 있습니다.

**2. 참고할 만한 공식 사이트나 블로그 링크:**

*   **cppreference.com - `consteval`:** [https://en.cppreference.com/w/cpp/language/consteval](https://en.cppreference.com/w/cpp/language/consteval)
*   **cppreference.com - `constinit`:** [https://en.cppreference.com/w/cpp/language/constinit](https://en.cppreference.com/w/cpp/language/constinit)
*   **C++ Insights:** [https://cppinsights.io/](https://cppinsights.io/) (`consteval` 함수가 어떻게 컴파일되는지 확인하는 데 유용합니다.)

**3. 간단한 코드 예시 (C++):**

```cpp
#include <iostream>

consteval int square(int n) { // 반드시 컴파일 시간에 평가되어야 함
  return n * n;
}

constinit int global_square = square(5); // 컴파일 시간에 초기화됨

int main() {
  std::cout << "Square of 5: " << global_square << std::endl; // 25 출력
  constexpr int local_square = square(3); //constexpr 변수는 컴파일 타임에 계산가능
  std::cout << "Square of 3: " << local_square << std::endl; // 9 출력
  //int runtime_square = square(7); // 컴파일 에러! consteval 함수는 런타임에 호출될 수 없음
  return 0;
}
```

**4. 코드 실행 결과 예시:**

```
Square of 5: 25
Square of 3: 9
```

