---
title: "C++ - Asynchronous Error Handling with `std::error_code` and `std::future`"
date: 2025-08-21 21:02:58 +0900
categories: c++
tags: [c++, 최신기술, 추천, C++, Asynchronous, Error, Handling, with, `std::error_code`, and, `std::future`]
---

## 오늘의 C++ 최신 기술 트렌드: **Asynchronous Error Handling with `std::error_code` and `std::future`**

**1. 간단한 설명:**
기존의 예외 처리 방식(try-catch)은 성능 저하를 일으킬 수 있으며, 비동기 환경에서는 예외를 던지고 받기가 어렵습니다.  `std::error_code`는 오류 코드를 반환하여 예외를 사용하지 않고 오류를 처리하는 방식을 제공하며, 비동기 작업의 결과를 `std::future`를 통해 전달받을 때 오류 정보를 함께 전달할 수 있어 비동기 환경에서의 오류 처리에 유용합니다.  이 접근 방식은 더 명확하고 제어 가능한 오류 처리 흐름을 제공하며, 특히 성능이 중요한 코드나 비동기 환경에서 예외 처리 오버헤드를 피할 수 있도록 해줍니다.  오류 코드를 명시적으로 확인하고 처리하므로 오류 복구 및 로깅 전략을 보다 정교하게 구현할 수 있습니다.

**2. 참고할 만한 공식 사이트나 블로그 링크:**

*   **cppreference.com:** [`std::error_code`](https://en.cppreference.com/w/cpp/error/error_code)
*   **cppreference.com:** [`std::future`](https://en.cppreference.com/w/cpp/thread/future)
*   **Bjarne Stroustrup's FAQ:**  [What about error handling?](http://www.stroustrup.com/except.pdf) (예외 처리에 대한 Bjarne Stroustrup의 견해)
*   **Boost.System:**  [Boost.System](https://www.boost.org/doc/libs/1_83_0/libs/system/doc/html/index.html) (C++ 표준에 영향을 준 시스템 관련 유틸리티 라이브러리, `std::error_code`와 관련)

**3. 간단한 코드 예시 (C++):**

```cpp
#include <iostream>
#include <future>
#include <system_error>

std::future<int> async_operation(int input) {
  return std::async(std::launch::async, [input]() -> int {
    if (input < 0) {
      throw std::runtime_error("Input must be non-negative."); // 또는 std::make_exception_ptr(std::runtime_error("Input must be non-negative."))로 예외 포인터를 반환할 수 있습니다.
    }
    if (input == 0) {
      std::error_code ec(1, std::generic_category()); // 사용자 정의 오류 코드
      return -1; // 오류 코드를 반환하는 대신 예외를 발생시키지 않습니다.
    }
    return input * 2;
  });
}

int main() {
  auto future_result = async_operation(5);

  try {
    int result = future_result.get(); // 결과 또는 예외를 가져옵니다.
    if (result == -1){
        std::cout << "Error occurred (input == 0).  Check error_code." << std::endl;
    }
    else{
        std::cout << "Result: " << result << std::endl;
    }
  } catch (const std::exception& e) {
    std::cerr << "Exception caught: " << e.what() << std::endl;
  }

  auto future_result2 = async_operation(-1);

  try {
    int result = future_result2.get(); // 결과 또는 예외를 가져옵니다.
    std::cout << "Result: " << result << std::endl;
  } catch (const std::exception& e) {
    std::cerr << "Exception caught: " << e.what() << std::endl;
  }

  auto future_result3 = async_operation(0);

  try {
    int result = future_result3.get(); // 결과 또는 예외를 가져옵니다.
    if (result == -1){
        std::cout << "Error occurred (input == 0). Check error_code." << std::endl;
    }
    else{
        std::cout << "Result: " << result << std::endl;
    }
  } catch (const std::exception& e) {
    std::cerr << "Exception caught: " << e.what() << std::endl;
  }

  return 0;
}
```

**4. 코드 실행 결과 예시:**

```
Result: 10
Exception caught: Input must be non-negative.
Error occurred (input == 0). Check error_code.
```

