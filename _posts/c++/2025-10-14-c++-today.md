---
title: "C++ - P2077R3: Freestanding Language: Optional `::operator new`"
date: 2025-10-14 21:03:29 +0900
categories: c++
tags: [c++, 최신기술, 추천, C++, P2077R3:, Freestanding, Language:, Optional, `::operator, new`]
---

## 오늘의 C++ 최신 기술 트렌드: **P2077R3: Freestanding Language: Optional `::operator new`**

**1. 간단한 설명:**

C++ 표준은 freestanding 환경 (운영체제가 없는 환경, 임베디드 시스템 등)에서 `::operator new` 및 `::operator delete`를 사용할 수 있도록 명시적으로 요구하지 않습니다. 이로 인해 특정 freestanding 환경에서는 동적 메모리 할당이 기본적으로 지원되지 않아 제한이 발생했습니다. P2077R3 제안은 freestanding 환경에서 `::operator new` 및 `::operator delete`의 존재를 선택 사항으로 만들어, 컴파일러 및 라이브러리 구현체가 freestanding 환경에 더욱 적합하도록 구성할 수 있도록 합니다. 즉, 구현체는 동적 메모리 할당이 필요하지 않은 경우 이 연산자들을 제공하지 않을 수 있습니다. 이로써 코드 크기를 줄이고, 메모리 사용량을 최적화하며, 보다 예측 가능한 동작을 보장하여 resource-constrained 환경에서 C++의 활용도를 높이는 것을 목표로 합니다.

**2. 참고할 만한 공식 사이트나 블로그 링크:**

*   **Proposal P2077R3:** [https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2077r3.html](https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2077r3.html)
*   **Discussion on cpplang Slack:** (cpplang Slack 채널에서 "P2077R3" 검색)

**3. 간단한 코드 예시 (C++):**

이 기능은 직접적인 코드 예시보다는 컴파일러 옵션이나 라이브러리 구현에 영향을 미치므로, 다음과 같은 조건부 컴파일을 통해 `::operator new`의 존재 여부에 따라 동작을 다르게 할 수 있습니다.

```cpp
#if __has_cpp_attribute(nodiscard) // or similar feature test macro
#  include <new> // Assuming freestanding support provides <new> if operator new is present
#  include <iostream>
#else
#  include <cstddef>
#  define nullptr 0
#  include <iostream>
#endif

#ifdef __cpp_freestanding
#  ifdef __cpp_new_delete // Check if operator new is supported in the freestanding environment
struct MyObject {
    int value;
};

int main() {
    MyObject* obj = new MyObject; // 동적 메모리 할당
    obj->value = 42;
    std::cout << "Value: " << obj->value << std::endl;
    delete obj;
    return 0;
}
#  else
int main() {
    std::cout << "Operator new and delete are not supported in this freestanding environment." << std::endl;
    return 0;
}
#  endif

#else
int main() {
    int *ptr = new int;
    *ptr = 10;
    std::cout << *ptr << std::endl;
    delete ptr;

    return 0;
}
#endif
```

**4. 코드 실행 결과 예시:**

*   **Freestanding 환경, `::operator new` 지원 시:**

```
Value: 42
```

*   **Freestanding 환경, `::operator new` 미지원 시:**

```
Operator new and delete are not supported in this freestanding environment.
```

*   **Hosted 환경:**

```
10
```

