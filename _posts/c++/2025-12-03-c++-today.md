---
title: "C++ - Static Reflection with User-Defined Attributes"
date: 2025-12-03 21:03:45 +0900
categories: c++
tags: [c++, 최신기술, 추천, C++, Static, Reflection, with, User, Defined, Attributes]
---

## 오늘의 C++ 최신 기술 트렌드: **Static Reflection with User-Defined Attributes**

**1. 간단한 설명:**

C++ 표준은 아직 완전한 형태의 Reflection 기능을 제공하지 않지만, 벤더 확장이나 외부 라이브러리(예: Clang LibTooling, Boost.PFR, magic_enum) 등을 통해 부분적인 Reflection을 구현할 수 있습니다.  최근 트렌드는 Reflection과 함께 사용자 정의 속성(User-Defined Attributes)을 결합하여 더욱 강력한 메타 프로그래밍 및 코드 생성 기능을 제공하는 것입니다. 사용자 정의 속성은 클래스 멤버, 함수, 클래스 자체 등에 추가적인 메타데이터를 첨부할 수 있게 해주며, Reflection을 통해 이 속성들을 읽어들여 런타임 또는 컴파일 타임에 다양한 동작을 수행할 수 있도록 합니다.  이를 통해 ORM(Object-Relational Mapping), 직렬화(Serialization), 유효성 검사(Validation), 자동 코드 생성 등 다양한 분야에서 활용 가능합니다.

**2. 참고할 만한 공식 사이트나 블로그 링크:**

*   **벤더 확장 Reflection 예시 (MSVC):** (공식 문서가 존재하지 않을 수 있음. 관련 블로그 게시글 등을 참고해야 함)
*   **Boost.PFR (Boost.Hana):** [https://www.boost.org/doc/libs/1_84_0/libs/pfr/doc/html/index.html](https://www.boost.org/doc/libs/1_84_0/libs/pfr/doc/html/index.html)
*   **magic_enum:** [https://github.com/Neargye/magic_enum](https://github.com/Neargye/magic_enum)
*   **User-Defined Attributes (C++11):** [https://en.cppreference.com/w/cpp/language/attributes](https://en.cppreference.com/w/cpp/language/attributes)
*   **Reflection TS (Technical Specification):** (현재 표준에 포함되지 않았지만, 관련 논의를 참고할 수 있음)

**3. 간단한 코드 예시 (C++):**

```c++
#include <iostream>
#include <string>
#include <vector>
#include <boost/pfr.hpp> // Boost.PFR 사용 예시

// 사용자 정의 속성
[[deprecated("This struct is deprecated, use NewStruct instead.")]]
struct MyStruct {
  [[maybe_unused]] int id;
  std::string name;
  double value;
};

// 사용자 정의 속성 접근 함수 (Boost.PFR 활용을 단순화)
template <typename T>
void print_member_names() {
  std::cout << "Members of " << typeid(T).name() << ":" << std::endl;
  boost::pfr::for_each_field<T>([&](const auto& field) {
      std::cout << "  - " << boost::pfr::name(field) << std::endl;
  });
}

int main() {
  MyStruct obj{1, "Example", 3.14};

  // 멤버 이름 출력
  print_member_names<MyStruct>();

  return 0;
}
```

**4. 코드 실행 결과 예시:**

```
Members of 8MyStruct:
  - id
  - name
  - value
```

**설명:**

위 예제는 사용자 정의 속성(`deprecated`, `maybe_unused`)과 Boost.PFR 라이브러리를 사용하여 구조체의 멤버 이름을 출력하는 간단한 코드입니다.

*   `[[deprecated("...")]]:`  컴파일러에게 해당 구조체가 더 이상 사용되지 않음을 알리는 속성입니다. 컴파일 시 경고가 발생할 수 있습니다.
*   `[[maybe_unused]]`: 컴파일러에게 해당 변수가 사용되지 않을 수 있음을 알리는 속성입니다. 컴파일 경고를 방지하는 데 사용됩니다.
*   `boost::pfr::for_each_field<T>(...)`:  Boost.PFR 라이브러리의 함수로, 구조체 T의 각 멤버에 대해 람다 함수를 실행합니다.
*   `boost::pfr::name(field)`: Boost.PFR 라이브러리의 함수로, 구조체 멤버의 이름을 문자열로 반환합니다.

이 예제는 매우 기본적인 수준이지만, 사용자 정의 속성과 Reflection을 결합하여 다양한 메타 프로그래밍 작업을 수행할 수 있음을 보여줍니다.  ORM, 직렬화, 유효성 검사 등의 고급 기능 구현에 활용될 수 있습니다.

